(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{87:function(e,t,n){},88:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(39),a=n.n(r),s=n(24),i=n(6),o=n.n(i),u=n(12),j=n(5),l=n(7),b=n(13),d=n(40),p=n(23),O=n.n(p);n(54),n(95),n(94);O.a.config();var f=d.a.initializeApp({apiKey:"AIzaSyDCDntmN3Jz8lWfqLp2UP3NRqren2OxrqM",authDomain:"books-b1b5c.firebaseapp.com",projectId:"books-b1b5c",storageBucket:"books-b1b5c.appspot.com",messagingSenderId:"369907354745",appId:"1:369907354745:web:11c7f358496116b45058a8"}),h=f.auth(),x=f.firestore(),m=f.storage(),g=n(1),v={categories:[{id:1,category:"\ube44\ubc1c\ub514"},{id:2,category:"\ubca0\ud1a0\ubca4"},{id:3,category:"\ubaa8\ucc28\ub974\ud2b8"}],select:[{id:1,category:"PLih16QaoQoPeQi0fNFAM2ARd904YSuzOC"},{id:2,category:"PLih16QaoQoPcHvLAFtMMFFDv2aZm71ipm"},{id:3,category:"PLih16QaoQoPcoHcobmayWb6ijKeMjdds5"}]},y=function(e,t){switch(t.type){case"SELECT":return Object(s.a)({},e.action);default:throw new Error("unHandled ".concat(t.type))}},w=Object(c.createContext)(),k=Object(c.createContext)(),S=Object(c.createContext)(),C=function(e){var t=e.children,n=Object(c.useReducer)(y,v),r=Object(j.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(),o=Object(j.a)(i,2),u=o[0],l=o[1],b=Object(c.useState)(!0),d=Object(j.a)(b,2),p=d[0],O=d[1],f=Object(c.useState)(""),x=Object(j.a)(f,2),m=x[0],C=x[1],N=Object(c.useState)(),F=Object(j.a)(N,2),R=F[0],U=F[1],L=Object(c.useState)(),I=Object(j.a)(L,2),D=I[0],P=I[1],A=Object(c.useState)(null),q=Object(j.a)(A,2),E=q[0],Q=q[1];Object(c.useEffect)((function(){return h.onAuthStateChanged((function(e){l(e),O(!1)}))}),[]);var z={currentUser:u,signup:function(e,t){return h.createUserWithEmailAndPassword(e,t)},login:function(e,t){return h.signInWithEmailAndPassword(e,t)},logout:function(){return h.signOut()},changeDisplayName:function(e,t){h.currentUser.updateProfile({displayName:e,photoURL:t})},imageSrc:m,onFileChange:function(e){return function(t){var n=t.target.files[0],c=new FileReader;c.onloadend=function(t){e(t.target.result),U(n.name)},c.readAsDataURL(n)}},clearImageSrc:function(e){return function(t){t.preventDefault(),e("")}},filename:R,setImageSrc:C,setBackground:P,background:D,setUserObj:Q,userObj:E};return Object(g.jsx)(S.Provider,{value:z,children:Object(g.jsx)(w.Provider,{value:a,children:Object(g.jsx)(k.Provider,{value:s,children:!p&&t})})})};function N(){return Object(c.useContext)(S)}var F=n(41),R=n.n(F),U=n(42),L=n(97);function I(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=N(),s=a.currentUser,i=a.onFileChange,l=a.imageSrc,b=a.setImageSrc,d=a.clearImageSrc,p=function(){var e=Object(u.a)(o.a.mark((function e(t){var c,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gest"===t||""===l){e.next=9;break}return a=m.ref().child("".concat(s.displayName,"/").concat(Object(L.a)())),e.next=4,a.putString(l,"data_url");case 4:return i=e.sent,e.next=7,i.ref.getDownloadURL();case 7:c=e.sent,console.log(c);case 9:x.collection(t).add({value:n,createAt:Date.now(),createId:t,fileURL:c||null}),r(""),b("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p(s?s.uid:"gest");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("form",{onSubmit:O,children:[Object(g.jsx)("input",{type:"text",value:n,onChange:function(e){var t=e.target.value;r(t)}}),s&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",{type:"file",onChange:i(b),accept:"image/*"}),l&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{src:l,alt:"\uc774\ubbf8\uc9c0\uc18c\uc2a4",width:"100px",height:"100px"}),Object(g.jsx)("button",{onClick:d(b),children:"Clear"})]})]}),Object(g.jsx)("button",{children:"\ubcf4\ub0b4\uae30"})]})}function D(e){var t=e.write,n=N(),r=n.currentUser,a=n.onFileChange,s=n.clearImageSrc,i=Object(c.useState)(!1),l=Object(j.a)(i,2),b=l[0],d=l[1],p=Object(c.useState)(""),O=Object(j.a)(p,2),f=O[0],h=O[1],v=Object(c.useState)(""),y=Object(j.a)(v,2),w=y[0],k=y[1],S="gest",C=function(e){x.doc("".concat(e,"/").concat(t.id)).delete()},F=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,C(r.uid);case 3:if(!t.fileURL){e.next=6;break}return e.next=6,m.refFromURL(t.fileURL).delete();case 6:e.next=10;break;case 8:return e.next=10,C(S);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){e.stopPropagation(),d((function(e){return!e}))},U=function(e){x.doc("".concat(e,"/").concat(t.id)).update({value:f,fileURL:w||null})},L=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r){e.next=8;break}return e.next=4,U(r.uid);case 4:k(""),h(""),e.next=10;break;case 8:return e.next=10,U(S);case 10:d(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"write-box",children:[Object(g.jsxs)("div",{className:"write-box2",children:[Object(g.jsx)("h3",{children:t.value}),t.fileURL&&Object(g.jsx)("img",{className:"write-img",src:t.fileURL,alt:"img"}),Object(g.jsxs)("div",{className:"picture-state-button",children:[Object(g.jsx)("button",{onClick:F,children:"\uc0ad\uc81c"}),Object(g.jsx)("button",{onClick:R,children:"\ubcc0\uacbd"})]})]}),b&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{onSubmit:L,children:[Object(g.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;h(t)},value:f}),Object(g.jsx)("input",{type:"file",onChange:a(k),accept:"image/*"}),w&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{src:w,alt:"\uc774\ubbf8\uc9c0\uc18c\uc2a4",width:"100px",height:"100px"}),Object(g.jsx)("button",{onClick:s(k),children:"Clear"})]}),Object(g.jsx)("button",{children:"\ubc14\uafb8\uae45"})]}),Object(g.jsx)("button",{onClick:R,children:"\ucde8\uc18c"})]})]})}n(87),n(88);function P(){var e=N(),t=e.currentUser,n=e.onFileChange,r=e.setUserObj,a=Object(c.useState)(""),s=Object(j.a)(a,2),i=s[0],l=s[1],b=function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ref().child("profile/".concat(t.displayName)).putString(i,"data_url");case 2:return e.next=4,e.sent.ref.getDownloadURL();case 4:return n=e.sent,e.next=7,h.currentUser.updateProfile({displayName:t.displayName,photoURL:n});case 7:r({displayName:t.displayName,photoURL:t.photoURL});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{children:t.displayName}),Object(g.jsx)("img",{src:t.photoURL,alt:"\ud504\ub85c\ud544\uc774\ubbf8\uc9c0",width:"100",height:"100"}),Object(g.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(g.jsx)("input",{type:"file",onChange:n(l),accept:"image/*"}),Object(g.jsx)("button",{onClick:b,children:"\ud655\uc778"}),Object(g.jsx)("button",{children:"\ucde8\uc18c"})]})]})}var A=Object(c.memo)(P);O.a.config();var q=function(){var e=N(),t=e.logout,n=e.currentUser,r=e.background,a=e.setBackground,i=Object(c.useContext)(w),d=i.categories,p=i.select,O=Object(l.f)(),f=Object(c.useState)([]),h=Object(j.a)(f,2),v=h[0],y=h[1],k=Object(c.useState)(0),S=Object(j.a)(k,2),C=S[0],F=S[1],L=Object(c.useState)(!1),P=Object(j.a)(L,2),q=P[0],E=P[1],Q=Object(c.useState)(!1),z=Object(j.a)(Q,2),B=z[0],H=z[1],M=Object(c.useState)([]),W=Object(j.a)(M,2),J=W[0],T=W[1],V=Object(c.useState)(!1),_=Object(j.a)(V,2),K=_[0],X=_[1],Y=Object(c.useState)(0),Z=Object(j.a)(Y,2),G=Z[0],$=Z[1],ee=Object(c.useState)(!1),te=Object(j.a)(ee,2),ne=te[0],ce=te[1],re=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=".concat(p[C].category,"&maxResults=50&key=").concat("AIzaSyAIQrLximAma09Oag8OxhfTHl0ovHXdz3g")).then((function(e){return y(e.data.items)})).catch((function(e){return console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae={width:"640",height:"390",playerVars:{autoplay:1}},se=Object(c.useCallback)((function(e){switch(e.preventDefault(),e.target.innerText){case"\ube44\ubc1c\ub514":F(0);break;case"\ubca0\ud1a0\ubca4":F(1);break;case"\ubaa8\ucc28\ub974\ud2b8":F(2);break;default:console.error("\ub9de\ub294\uc9dd\uc774\uc5c6\uc2b5\ub2c8\ub2e4.")}E(!0)}),[F]);Object(c.useEffect)((function(){return re(),re()}),[C]);var ie=function(e){H(e)},oe=function(e){x.collection(e).orderBy("createAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)({id:e.id},e.data())}));T(t)}))};return Object(c.useEffect)((function(){n?(oe("".concat(n.uid)),m.ref("backgroundImage/bg".concat(C+1,".jpg")).getDownloadURL().then((function(e){return a(e)}))):oe("gest")}),[n,a,C]),Object(g.jsxs)("section",{className:"main-section ",children:[Object(g.jsxs)("div",{className:"main-page-box",children:[Object(g.jsxs)("div",{className:"music-button-set",children:[d.map((function(e){return Object(g.jsx)("button",{onClick:se,children:e.category},e.id)})),Object(g.jsxs)("div",{className:"play-state-button",children:[Object(g.jsx)("button",{onClick:function(){B.target.playVideo()},children:"\uc2dc\uc791"}),Object(g.jsx)("button",{onClick:function(){B.target.pauseVideo()},children:"\uc815\uc9c0"}),Object(g.jsx)("button",{onClick:function(){if(v.length-1<=G)return $(0);$((function(e){return e+1}))},children:"\ub2e4\uc74c"}),Object(g.jsx)("button",{onClick:function(){if(G<=0)return $(v.length-1);$((function(e){return e-1}))},children:"\uc774\uc804"})]}),Object(g.jsx)(b.b,{to:"/",children:Object(g.jsx)("button",{children:"\ud648\uc73c\ub85c"})})]}),q&&v.filter((function(e){return e.snippet.position===G})).map((function(e){var t=e.id,n=e.snippet.resourceId.videoId;return Object(g.jsx)(U.a,{opts:ae,videoId:n,onReady:ie,className:"youtube-player"},t)})),Object(g.jsxs)("div",{className:"main-box",children:[Object(g.jsxs)("div",{className:"main-profile",children:[n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{children:n.displayName}),n.photoURL&&Object(g.jsx)("img",{src:n.photoURL,alt:"\ud504\ub85c\ud544",onClick:function(){ce(!ne),X(!1)}})]}):Object(g.jsx)("div",{children:"\uac8c\uc2a4\ud2b8"}),ne&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{onClick:function(){t(),O.push("/")},children:"\ub85c\uadf8\uc544\uc6c3"}),Object(g.jsx)("button",{onClick:function(){return X((function(e){return!e}))},children:"\ud504\ub85c\ud544\ubcc0\uacbd"}),K&&Object(g.jsx)(A,{})]})]}),!n&&Object(g.jsx)(b.b,{to:"/signup",children:Object(g.jsx)("button",{children:"\ud68c\uc6d0\uac00\uc785\ud558\ub7ec\uac00\uae30"})}),Object(g.jsx)(I,{})]}),J.map((function(e){return Object(g.jsx)(D,{write:e},e.id)}))]}),r&&Object(g.jsx)("img",{className:"background",src:r,alt:"\ubc30\uacbd\ud654\uba74"})]})},E=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("h1",{children:"\uc5ec\uae30\ub294 \ud398\uc774\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})};n(91);function Q(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),a=N(),s=a.signup,i=a.changeDisplayName,d=a.onFileChange,p=a.imageSrc,O=a.setImageSrc,f=a.clearImageSrc,h=Object(c.useState)(""),x=Object(j.a)(h,2),v=x[0],y=x[1],w=Object(c.useState)(!1),k=Object(j.a)(w,2),S=k[0],C=k[1],F=Object(l.f)(),R=function(){var c=Object(u.a)(o.a.mark((function c(a){var u;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a.preventDefault(),n.current.value===e.current.value){c.next=3;break}return c.abrupt("return",y("Passwords do not match"));case 3:return c.prev=3,y(""),C(!0),c.next=8,s(t.current.value,n.current.value);case 8:return c.next=10,m.ref().child("profile/".concat(r.current.value)).putString(p,"data_url");case 10:return c.next=12,c.sent.ref.getDownloadURL();case 12:return u=c.sent,c.next=15,i(r.current.value,u);case 15:F.push("/"),c.next=21;break;case 18:c.prev=18,c.t0=c.catch(3),y("Failed to create an account");case 21:C(!1),O("");case 23:case"end":return c.stop()}}),c,null,[[3,18]])})));return function(e){return c.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"page signup",children:Object(g.jsxs)("div",{className:"page-box",children:[Object(g.jsx)("h2",{children:"\ud68c\uc6d0\uac00\uc785"}),Object(g.jsx)("div",{children:v}),Object(g.jsx)("div",{className:"signup-form",children:Object(g.jsxs)("form",{onSubmit:R,children:[Object(g.jsx)("label",{htmlFor:"email",children:"\uc544\uc774\ub514"}),Object(g.jsx)("input",{type:"email",ref:t,id:"email",required:!0,autoComplete:"off",autoFocus:!0}),Object(g.jsx)("label",{htmlFor:"displayName",children:"\ub2c9\ub124\uc784"}),Object(g.jsx)("input",{type:"text",ref:r,id:"displayName",required:!0,autoComplete:"off"}),Object(g.jsx)("label",{htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638"}),Object(g.jsx)("input",{type:"password",ref:n,id:"password",required:!0,autoComplete:"off"}),Object(g.jsx)("label",{htmlFor:"password-confirm",children:"\ube44\ubc00\ubc88\ud638 \uc7ac\ud655\uc778"}),Object(g.jsx)("input",{type:"password",ref:e,id:"password-confirm",required:!0,autoComplete:"off"}),Object(g.jsx)("label",{children:"\ud504\ub85c\ud544\uc0ac\uc9c4"}),Object(g.jsx)("input",{className:"profile",type:"file",onChange:d(O),accept:"image/*"}),p&&Object(g.jsxs)("p",{children:[Object(g.jsx)("img",{src:p,alt:"profileImage",width:"100px",height:"100px"}),Object(g.jsx)("button",{onClick:f(O),children:"Clear"})]}),Object(g.jsx)("button",{disabled:S,type:"submit",children:"Sign up"})]})}),Object(g.jsxs)("span",{children:["\uc774\ubbf8 \ud68c\uc6d0\uac00\uc785\uc744 \ud588\ub2e4\uba74?",Object(g.jsx)(b.b,{to:"/",children:"\ub85c\uadf8\uc778"})]})]})})}function z(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=N().login,r=Object(c.useState)(""),a=Object(j.a)(r,2),s=a[0],i=a[1],b=Object(c.useState)(!1),d=Object(j.a)(b,2),p=d[0],O=d[1],f=Object(l.f)(),h=function(){var c=Object(u.a)(o.a.mark((function c(r){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),c.prev=1,i(""),O(!0),c.next=6,n(e.current.value,t.current.value);case 6:f.push("/main"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),i("Failed to Log in");case 12:O(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"login-form",children:[Object(g.jsx)("div",{children:s}),Object(g.jsxs)("form",{onSubmit:h,children:[Object(g.jsx)("label",{htmlFor:"email",children:Object(g.jsx)("input",{type:"email",ref:e,id:"email",required:!0,autoComplete:"off",placeholder:"id",autoFocus:!0})}),Object(g.jsx)("label",{htmlFor:"current-password",children:Object(g.jsx)("input",{type:"password",ref:t,id:"current-password",required:!0,autoComplete:"off",placeholder:"password"})}),Object(g.jsx)("button",{disabled:p,type:"submit",children:"Log in"})]})]})}n(92);function B(){var e=N(),t=e.currentUser,n=e.logout;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"page",children:Object(g.jsxs)("div",{className:"page-box",children:[Object(g.jsx)("h2",{children:"\uace0\ub3c5\ud55c \ub3c5\uc11c"}),t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h2",{children:t.displayName}),Object(g.jsx)("img",{className:"profile",src:t.photoURL,alt:"\ud504\ub85c\ud544\uc774\ubbf8\uc9c0"})]}):Object(g.jsx)(z,{}),Object(g.jsxs)("div",{className:"first-button-set",children:[t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b.b,{to:"/",onClick:function(){n()},children:"\ub85c\uadf8\uc544\uc6c3"}),Object(g.jsx)("span",{children:"|"}),Object(g.jsx)(b.b,{to:"/main",children:"\ub3c5\uc11c"})]}):Object(g.jsx)(b.b,{to:"/main",children:"\uac8c\uc2a4\ud2b8"}),Object(g.jsx)("span",{children:"|"}),Object(g.jsx)(b.b,{to:"/signup",children:"\ud68c\uc6d0\uac00\uc785"}),Object(g.jsx)("span",{children:"|"}),Object(g.jsx)(b.b,{to:"/custom",children:"\ucee4\uc2a4\ud140"})]})]})})})}var H=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(C,{children:Object(g.jsx)(b.a,{children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{exact:!0,path:"/",component:B}),Object(g.jsx)(l.a,{path:"/main",component:q}),Object(g.jsx)(l.a,{path:"/signup",component:Q}),Object(g.jsx)(l.a,{component:E})]})})})})};a.a.render(Object(g.jsx)(H,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.e5ee33fd.chunk.js.map